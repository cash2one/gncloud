
<h1>묻고답하기</h1>
<h2>연구1팀

<!--쓰기 버튼-->
<input type="button" class="btn btn-right btn-default pull-right" data-toggle="modal" data-target="#modi-write" value="작성하기"></h2>

<!-- 묻고 답하기 글쓰기 Modal -->
<div class="modal fade" id="modi-write" role="dialog">
    <div class="modal-backdrop fade in" style="height: 3000px;"></div>
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header gn-modal-header">
                <button type="button" class="close" data-dismiss="modal" ng-click="close()">&times;</button>
                <h4 class="modal-title">작성하기</h4>
            </div>
            <div class="modal-body gn-modal-body">
                <form class="form-horizontal" name="qnaForm" ng-submit="submitForm(qnaForm.$valid)" novalidate>
                    <div class="form-group">
                        <label class="col-sm-1 control-label">제목</label>
                        <div class="col-sm-11">
                            <input type="text" name="title" class="form-control" id="title" ng-model="data.title" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-1 control-label">내용</label>
                        <div class="col-sm-11">
                            <textarea class="form-control gn-write" name="text" rows="6" id="text" placeholder="내용을 입력하여주세요." ng-model="data.text" required></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer gn-modal-footer">
                <button type="submit" class="btn btn-default" data-dismiss="modal" ng-click="qna_create()" ng-disabled="qnaForm.$invalid">등록</button>
            </div>
        </div>
    </div>
</div><!--<div class="modal fade" id="modi-write" role="dialog">-->
<!--묻고 답하기 목록-->
<div class="table-responsive gn-table-responsive">
    <table class="table gn-board-table table-condensed table-hover">
        <thead>
        <tr>
            <th class="col-sm-1">#</th>
            <th class="col-sm-7">내용</th>
            <th class="col-sm-3">작성일</th>
        </tr>
        </thead>
        <tbody class="gn-tdody">
        <tr class="" ng-repeat="list in list">
            <td>{{total_page-($index+this_page)}}</td>
            <td class="second-td-name"><a data-toggle="modal" data-target="#modal-board" ng-click="qna_info(list.id,data.page)">{{list.title}}</a></td>
            <td>{{list.create_date}}</td>
        </tr>

        </tbody>
    </table>
</div><!--div class="table-responsive gn-table-responsive" -->

<!--이전/다음 버튼-->
<input type="button" class="btn" ng-click="noticeList(prev_page)" value="이전" ng-show="page_hist != 1">
<input type="button" class="btn" ng-click="noticeList(next_page)" value="다음" ng-show="page_total!=page_hist">

<!-- 묻고 답하기 내용 Modal -->
<div class="modal fade" id="modal-board" role="dialog">
    <div class="modal-backdrop fade in" style="height: 3000px;"></div>
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header gn-modal-header">
                <button type="button" class="close" data-dismiss="modal" ng-click="close()">&times;</button>
                <h4 class="modal-title">{{notice.title}}</h4>
                <p><span class="gn-write">&nbsp;{{notice.create_date}}</span></p>
            </div>
            <div class="modal-body gn-modal-body">

                <form class="form-horizontal">
                    <!--본문 내용-->
                    <div class="form-group gn-content">
                        <div class="container-fluid">
                            <span class="gn-write" ng-show="showData == '1'">{{notice.text}}</span>
                            <div id="change" class="second-td-name gn-lead col-sm-9" ng-show="showData=='2'">
                                <textarea class="form-control gn-write"  rows="6" ng-model="notice.text"></textarea></div>
                        </div>
                    </div>
                    <!--댓글 : 사용자이름-->
                    <div class="form-group">
                        <div ng-repeat="reply in reply">
                            <div class="gn-comment container-fluid">
                                <span class="col-sm-2">{{reply.author_id}}</span>
                                <span class="col-sm-9" ng-show="showData=='1' || showData=='2'">{{reply.text}}</span>
                                <div id="changereply" class="second-td-name gn-lead col-sm-9" ng-show="showData=='3'">
                                    <textarea class="form-control gn-write" rows="6" ng-model="reply.text"></textarea></div>

                                <span class="col-sm-1">
                                        <a class="glyphicon glyphicon-trash pull-right" data-dismiss="modal" ng-show="user_info.authority == 'sysowner'|| user_info.name == reply.author_id" ng-click="delete_reply(reply.id)"></a>
                                        <a class="glyphicon glyphicon-pencil pull-right" ng-show="user_info.authority == 'sysowner'|| user_info.name == reply.author_id" ng-click="showData='3'"></a>
                                    <button type="submit" style="margin-top:90px" class="btn btn-default pull-right" data-dismiss="modal" ng-show="showData=='3'" ng-click="showData='1';changereply(reply.id,reply.text)">저장</button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <!--댓글달기 영역-->
                    <div class="form-group">
                        <div class="gn-answer container-fluid">
                            <form name="replyForm" ng-submit="submitForm(replyForm.$valid)" novalidate>
                                <span class="col-sm-2">답변</span>
                                <span class="col-sm-10" ng-class="{ 'has-error' : replyForm.replytext.$invalid && !replyForm.replytext.$pristine }">
                                        <textarea class="form-control gn-write gn-margin-bott10" name="replytext" ng-model="data.reply_text" rows="6" id="replytext" placeholder="내용을 입력하여주세요." required></textarea>
                                        <button type="submit" class="btn btn-default gn-btn-height btn-block" data-dismiss="modal" ng-click="qna_reply_create(notice.id)" ng-disabled="replyForm.$invalid">저장</button>
                                </span>
                            </form>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer gn-modal-footer">
                <p><!--구분선--></p>
                <button type="submit" class="btn btn-default btn-delete pull-left" data-dismiss="modal" ng-show="user_info.authority == 'sysowner' || user_info.user_id == notice.author_id" ng-click="deleteqna(notice.id)">삭제</button>
                <button type="submit" class="btn btn-default pull-left" ng-show="(user_info.authority == 'sysowner'|| user_info.user_id == notice.author_id )&& showData =='1' " ng-click="showData= '2'">수정</button>
                <button type="submit" class="btn btn-default pull-left" data-dismiss="modal" ng-show="(user_info.authority == 'sysowner'|| user_info.user_id == notice.author_id) && showData=='2' " ng-click="showData='1';changeqna(notice.id, notice.text)">저장</button>
                <button type="submit" class="btn btn-default pull-right" data-dismiss="modal" ng-click="showData='1';close()">닫기</button>
            </div>
        </div>
    </div>
</div>